var st_dict = {};
var ts_dict = {};

var txt_data = `皑:皚
蔼:藹
奧:奥
爱:愛
碍:礙
肮:骯
袄:襖
毕:畢
边:邊
宾:賓
罢:罷
备:備
贝:貝
笔:筆
刍:芻
从:從
窜:竄
参:參
仓:倉
产:産
长:長
尝:嘗
车:車
齿:齒
虫:蟲
断:斷
当:當
达:達
带:帶
单:單
党:黨
动:動
东:東
对:對
队:隊
尔:爾
儿:兒
饵:餌
贰:貳
发:發
丰:豐
风:風
国:國
过:過
冈:岡
广:廣
归:歸
龟:龜
会:會
华:華
画:畫
汇:匯
彙:进
進:举
舉:尽
盡:儘
几:幾
夹:夾
戋:戔
监:監
见:見
荐:薦
将:將
节:節
壳:殻
历:歷
曆:卤
鹵:滷
来:來
乐:樂
离:離
丽:麗
两:兩
灵:靈
刘:劉
龙:龍
娄:婁
卢:盧
虏:虜
录:録
虑:慮
仑:侖
罗:羅
门:門
黾:黽
马:馬
买:買
卖:賣
麦:麥
农:農
难:難
鸟:鳥
聂:聶
宁:寜
区:區
齐:齊
岂:豈
气:氣
迁:遷
佥:僉
乔:喬
亲:親
穷:窮
啬:嗇
杀:殺
审:審
圣:聖
师:師
时:時
寿:夀
属:屬
双:雙
肃:肅
岁:嵗
孙:孫
条:條
无:無
万:萬
为:為
韦:韋
乌:烏
献:獻
乡:鄉
写:寫
寻:尋
与:與
云:雲
亚:亞
严:嚴
厌:厭
尧:堯
业:業
页:頁
义:義
艺:兿
阴:陰
隐:隱
犹:猶
鱼:魚
郑:鄭
执:執
质:質
专:專
补:補
坝:壩
板:闆
办:辦
帮:幫
宝:寶
报:報
币:幣
毙:斃
标:標
表:錶
别:彆
卜:蔔
聪:聰
丛:叢
才:纔
蚕:蠶
灿:燦
层:層
搀:攙
谗:讒
馋:饞
缠:纏
忏:懺
偿:償
厂:廠
彻:徹
尘:塵
衬:襯
称:稱
惩:懲
迟:遲
冲:衝
丑:醜
出:齣
础:礎
处:處
触:觸
辞:辭
堕:墮
担:擔
胆:膽
导:導
灯:燈
邓:鄧
敌:敵
籴:糴
递:遞
点:點
淀:澱
电:電
冬:鼕
斗:鬥
独:獨
吨:噸
夺:奪
妇:婦
复:復
矾:礬
范:範
飞:飛
坟:墳
奋:奮
粪:糞
凤:鳳
肤:膚
柜:櫃
干:乾
盖:蓋
赶:趕
个:個
巩:鞏
沟:溝
构:構
购:購
谷:榖
顾:顧
刮:颳
关:關
观:觀
伙:夥
获:獲
汉:漢
号:號
合:閤
轰:轟
后:後
胡:鬍
壶:壺
沪:滬
护:護
划:劃
怀:懷
坏:壞
欢:歡
环:環
还:還
回:迴
卷:捲
击:撃
鸡:鷄
积:積
极:極
际:際
继:繼
家:傢
价:價
艰:艱
歼:殲
茧:繭
拣:揀
硷:鹸
舰:艦
姜:薑
浆:漿
桨:槳
奖:獎
讲:講
酱:醤
胶:膠
阶:階
疖:癤
洁:潔
借:藉
仅:僅
惊:驚
竞:競
旧:舊
剧:劇
据:據
惧:懼
开:開
克:剋
垦:墾
恳:懇
夸:誇
块:塊
亏:虧
困:睏
陆:陸
驴:驢
乱:亂
腊:臘
蜡:蠟
兰:蘭
拦:攔
栏:欄
烂:爛
累:纍
垒:壘
类:類
里:裏
礼:禮
隶:隷
帘:簾
联:聯
怜:憐
炼:煉
练:練
粮:糧
疗:療
辽:遼
了:瞭
猎:獵
临:臨
邻:鄰
岭:嶺
庐:廬
芦:蘆
炉:爐
蔑:衊
亩:畝
么:麽
霉:黴
蒙:矇
濛:懞
梦:夢
面:麵
庙:廟
灭:滅
疟:瘧
恼:惱
脑:腦
拟:擬
酿:釀
扑:撲
仆:僕
朴:樸
盘:盤
辟:闢
苹:蘋
凭:憑
劝:勸
确:確
纤:縴
启:啓
签:籤
千:韆
牵:牽
窍:竅
窃:竊
寝:寢
庆:慶
琼:瓊
秋:鞦
曲:麯
权:權
让:讓
扰:擾
热:熱
认:認
苏:蘇
洒:灑
伞:傘
丧:喪
扫:掃
涩:澀
晒:曬
伤:傷
舍:捨
沈:瀋
声:聲
胜:勝
湿:濕
实:實
适:適
势:勢
兽:獸
书:書
术:術
树:樹
帅:帥
松:鬆
虽:雖
随:隨
台:臺
态:態
叹:嘆
誊:謄
体:體
粜:糶
铁:鐵
听:聽
厅:廳
头:頭
图:圖
涂:塗
椭:橢
坛:壇
团:團
稳:穩
务:務
雾:霧
洼:窪
袜:襪
网:網
卫:衛
系:係
牺:犧
习:習
戏:戲
虾:蝦
吓:嚇
咸:鹹
显:顯
宪:憲
县:縣
响:響
向:嚮
协:協
胁:脅
亵:褻
衅:釁
兴:興
须:鬚
悬:懸
选:選
旋:鏇
酝:醖
压:壓
盐:鹽
阳:陽
养:養
痒:癢
样:様
钥:鑰
药:藥
爷:爺
叶:葉
医:醫
亿:億
忆:憶
应:應
痈:癰
拥:擁
佣:傭
踊:踴
忧:憂
优:優
邮:郵
余:餘
御:禦
吁:籲
郁:鬱
誉:譽
渊:淵
园:園
远:遠
愿:願
跃:躍
运:運
杂:雜
赃:臓
凿:鑿
枣:棗
灶:竈
斋:齋
毡:氈
战:戰
赵:趙
折:摺
这:這
征:徵
症:癥
证:證
致:緻
制:製
肿:腫
种:種
众:衆
昼:晝
朱:硃
烛:燭
筑:築
庄:莊
桩:樁
妆:妝
装:裝
壮:壯
状:狀
准:凖
浊:濁
总:總
钻:鑽
钟:鐘
鍾:脏
贜:髒
只:隻
祗:衹
摆:擺
败:敗
颁:頒
绊:絆
绑:綁
镑:鎊
谤:謗
剥:剝
饱:飽
鲍:鮑
辈:輩
钡:鋇
狈:狽
惫:憊
绷:繃
闭:閉
辟:闢
编:編
贬:貶
变:變
辩:辯
辫:辮
鳖:鱉
瘪:癟
濒:瀕
滨:濱
摈:擯
饼:餅
并:並
拨:撥
钵:缽
铂:鉑
驳:駁
财:財
采:採
残:殘
惭:慚
惨:慘
苍:蒼
舱:艙
沧:滄
厕:廁
侧:側
册:冊
测:測
诧:詫
掺:摻
蝉:蟬
铲:鏟
阐:闡
颤:顫
场:場
偿:償
肠:腸
畅:暢
钞:鈔
彻:徹
陈:陳
衬:襯
撑:撐
诚:誠
骋:騁
驰:馳
耻:恥
炽:熾
宠:寵
畴:疇
踌:躊
筹:籌
绸:綢
橱:櫥
厨:廚
锄:鋤
雏:雛
储:儲
触:觸
传:傳
疮:瘡
闯:闖
创:創
锤:錘
纯:純
绰:綽
词:詞
赐:賜
葱:蔥
囱:囪
凑:湊
蹿:躥
错:錯
贷:貸
郸:鄲
掸:撣
惮:憚
诞:誕
弹:彈
挡:擋
荡:蕩
档:檔
捣:搗
岛:島
祷:禱
盗:盜
涤:滌
缔:締
颠:顛
垫:墊
钓:釣
调:調
谍:諜
叠:疊
钉:釘
顶:頂
锭:錠
订:訂
丢:丟
栋:棟
冻:凍
犊:犢
读:讀
赌:賭
镀:鍍
锻:鍛
缎:緞
兑:兌
顿:頓
钝:鈍
鹅:鵝
额:額
讹:訛
恶:惡
饿:餓
罚:罰
阀:閥
珐:琺
钒:釩
烦:煩
贩:販
饭:飯
访:訪
纺:紡
诽:誹
废:廢
费:費
纷:紛
愤:憤
枫:楓
锋:鋒
疯:瘋
冯:馮
缝:縫
讽:諷
辐:輻
抚:撫
辅:輔
赋:賦
负:負
讣:訃
缚:縛
该:該
钙:鈣
秆:稈
赣:贛
刚:剛
钢:鋼
纲:綱
岗:崗
镐:鎬
搁:擱
鸽:鴿
阁:閣
铬:鉻
给:給
龚:龔
宫:宮
贡:貢
钩:鉤
够:夠
蛊:蠱
雇:僱
剐:剮
挂:掛
馆:館
惯:慣
贯:貫
规:規
硅:矽
闺:閨
轨:軌
诡:詭
贵:貴
刽:劊
辊:輥
滚:滾
锅:鍋
骇:駭
韩:韓
阂:閡
鹤:鶴
贺:賀
横:橫
鸿:鴻
红:紅
户:戶
哗:嘩
话:話
缓:緩
换:換
唤:喚
痪:瘓
焕:煥
涣:渙
黄:黃
谎:謊
挥:揮
辉:輝
毁:毀
贿:賄
秽:穢
烩:燴
讳:諱
诲:誨
绘:繪
荤:葷
浑:渾
货:貨
祸:禍
机:機
饥:饑
迹:跡
讥:譏
绩:績
缉:緝
辑:輯
级:級
挤:擠
蓟:薊
剂:劑
济:濟
计:計
记:記
纪:紀
荚:莢
颊:頰
贾:賈
钾:鉀
驾:駕
坚:堅
笺:箋
间:間
缄:緘
检:檢
碱:鹼
捡:撿
简:簡
俭:儉
减:減
槛:檻
鉴:鑒
践:踐
贱:賤
键:鍵
剑:劍
饯:餞
渐:漸
溅:濺
涧:澗
蒋:蔣
浇:澆
骄:驕
娇:嬌
搅:攪
铰:鉸
矫:矯
侥:僥
脚:腳
饺:餃
缴:繳
绞:絞
轿:轎
较:較
杰:傑
结:結
诫:誡
届:屆
紧:緊
锦:錦
谨:謹
晋:晉
烬:燼
劲:勁
荆:荊
茎:莖
鲸:鯨
经:經
颈:頸
静:靜
镜:鏡
径:徑
痉:痙
净:淨
纠:糾
厩:廄
驹:駒
锯:鋸
鹃:鵑
绢:絹
觉:覺
决:決
诀:訣
绝:絕
钧:鈞
军:軍
骏:駿
凯:凱
颗:顆
课:課
抠:摳
库:庫
裤:褲
侩:儈
宽:寬
矿:礦
旷:曠
况:況
岿:巋
窥:窺
馈:饋
溃:潰
扩:擴
阔:闊
蜡:蠟
腊:臘
莱:萊
来:來
赖:賴
蓝:藍
栏:欄
拦:攔
篮:籃
阑:闌
兰:蘭
澜:瀾
谰:讕
揽:攬
览:覽
懒:懶
缆:纜
烂:爛
滥:濫
捞:撈
劳:勞
涝:澇
乐:樂
镭:鐳
垒:壘
类:類
泪:淚
厘:釐
篱:籬
离:離
里:裡
鲤:鯉
礼:禮
丽:麗
厉:厲
励:勵
砾:礫
历:歷
傈:栗
沥:瀝
隶:隸
俩:倆
联:聯
莲:蓮
连:連
镰:鐮
怜:憐
涟:漣
帘:簾
敛:斂
脸:臉
链:鏈
恋:戀
炼:煉
练:練
粮:糧
凉:涼
两:兩
辆:輛
谅:諒
疗:療
辽:遼
镣:鐐
猎:獵
临:臨
邻:鄰
鳞:鱗
凛:凜
赁:賃
龄:齡
铃:鈴
灵:靈
岭:嶺
领:領
馏:餾
刘:劉
龙:龍
聋:聾
咙:嚨
笼:籠
垄:壟
拢:攏
陇:隴
楼:樓
娄:婁
搂:摟
篓:簍
芦:蘆
卢:盧
颅:顱
庐:廬
炉:爐
掳:擄
卤:鹵
虏:虜
鲁:魯
赂:賂
禄:祿
录:錄
陆:陸
驴:驢
吕:呂
铝:鋁
侣:侶
屡:屢
缕:縷
虑:慮
滤:濾
绿:綠
峦:巒
挛:攣
孪:孿
滦:灤
乱:亂
抡:掄
轮:輪
伦:倫
仑:侖
沦:淪
纶:綸
论:論
萝:蘿
罗:羅
逻:邏
锣:鑼
箩:籮
骡:騾
骆:駱
络:絡
妈:媽
玛:瑪
码:碼
蚂:螞
骂:罵
吗:嗎
迈:邁
脉:脈
瞒:瞞
馒:饅
蛮:蠻
满:滿
谩:謾
猫:貓
锚:錨
铆:鉚
贸:貿
酶:霉
没:沒
镁:鎂
闷:悶
们:們
锰:錳
谜:謎
弥:彌
觅:覓
幂:冪
绵:綿
缅:緬
悯:憫
闽:閩
鸣:鳴
铭:銘
谬:謬
谋:謀
呐:吶
钠:鈉
纳:納
挠:撓
闹:鬧
馁:餒
内:內
腻:膩
撵:攆
啮:嚙
镊:鑷
镍:鎳
柠:檸
狞:獰
拧:擰
钮:鈕
纽:紐
脓:膿
浓:濃
诺:諾
欧:歐
鸥:鷗
殴:毆
呕:嘔
沤:漚
庞:龐
抛:拋
赔:賠
喷:噴
鹏:鵬
骗:騙
飘:飄
频:頻
贫:貧
评:評
泼:潑
颇:頗
铺:鋪
谱:譜
脐:臍
骑:騎
弃:棄
讫:訖
钎:釬
铅:鉛
谦:謙
钱:錢
钳:鉗
潜:潛
浅:淺
谴:譴
堑:塹
枪:槍
呛:嗆
墙:牆
蔷:薔
强:強
抢:搶
锹:鍬
桥:橋
侨:僑
翘:翹
钦:欽
轻:輕
氢:氫
倾:傾
顷:頃
请:請
趋:趨
躯:軀
驱:驅
龋:齲
颧:顴
却:卻
鹊:鵲
饶:饒
绕:繞
韧:韌
纫:紉
荣:榮
绒:絨
软:軟
锐:銳
闰:閏
润:潤
萨:薩
鳃:鰓
赛:賽
叁:杬
骚:騷
刹:剎
纱:紗
筛:篩
删:刪
闪:閃
陕:陝
赡:贍
缮:繕
墒:濕
赏:賞
烧:燒
绍:紹
赊:賒
摄:攝
慑:懾
设:設
绅:紳
婶:嬸
肾:腎
渗:滲
绳:繩
狮:獅
诗:詩
尸:屍
蚀:蝕
识:識
驶:駛
释:釋
饰:飾
视:視
试:試
枢:樞
输:輸
赎:贖
竖:豎
数:數
谁:誰
税:稅
顺:順
说:說
硕:碩
烁:爍
丝:絲
饲:飼
耸:聳
怂:慫
颂:頌
讼:訟
诵:誦
擞:擻
诉:訴
绥:綏
损:損
笋:筍
缩:縮
琐:瑣
锁:鎖
獭:獺
挞:撻
酞:太
摊:攤
贪:貪
瘫:癱
滩:灘
谭:譚
谈:談
汤:湯
烫:燙
涛:濤
绦:絛
讨:討
腾:騰
锑:銻
题:題
屉:屜
贴:貼
烃:烴
铜:銅
统:統
秃:禿
颓:頹
蜕:蛻
脱:脫
鸵:鴕
驮:馱
驼:駝
弯:彎
湾:灣
顽:頑
违:違
围:圍
潍:濰
维:維
苇:葦
伟:偉
伪:偽
纬:緯
谓:謂
温:溫
闻:聞
纹:紋
问:問
挝:撾
蜗:蝸
涡:渦
窝:窩
卧:臥
呜:嗚
钨:鎢
诬:誣
芜:蕪
吴:吳
坞:塢
误:誤
锡:錫
袭:襲
铣:銑
细:細
辖:轄
峡:峽
侠:俠
狭:狹
厦:廈
锨:杴
鲜:鮮
纤:纖
贤:賢
衔:銜
闲:閒
险:險
现:現
馅:餡
线:線
厢:廂
镶:鑲
详:詳
项:項
萧:蕭
嚣:囂
销:銷
晓:曉
啸:嘯
挟:挾
携:攜
胁:脅
谐:諧
泻:瀉
谢:謝
锌:鋅
衅:釁
兴:興
汹:洶
锈:鏽
绣:繡
虚:虛
嘘:噓
须:須
许:許
叙:敘
绪:緒
续:續
轩:軒
悬:懸
选:選
癣:癬
绚:絢
学:學
勋:勛
询:詢
驯:馴
训:訓
讯:訊
逊:遜
鸦:鴉
鸭:鴨
哑:啞
讶:訝
阉:閹
烟:煙
颜:顏
阎:閻
艳:艷
砚:硯
彦:彥
谚:諺
验:驗
鸯:鴦
杨:楊
扬:揚
疡:瘍
瑶:瑤
摇:搖
遥:遙
窑:窯
谣:謠
铱:銥
颐:頤
遗:遺
仪:儀
蚁:蟻
诣:詣
议:議
谊:誼
译:譯
异:異
绎:繹
荫:蔭
银:銀
饮:飲
樱:櫻
婴:嬰
鹰:鷹
缨:纓
莹:瑩
萤:螢
营:營
荧:熒
蝇:蠅
赢:贏
颖:穎
哟:喲
咏:詠
铀:鈾
游:遊
诱:誘
于:於
舆:輿
渔:漁
娱:娛
屿:嶼
语:語
狱:獄
预:預
驭:馭
鸳:鴛
辕:轅
员:員
圆:圓
缘:緣
约:約
粤:粵
悦:悅
阅:閱
郧:鄖
匀:勻
陨:隕
蕴:蘊
晕:暈
韵:韻
灾:災
载:載
攒:攢
暂:暫
赞:贊
责:責
择:擇
则:則
泽:澤
贼:賊
赠:贈
轧:軋
铡:鍘
闸:閘
栅:柵
诈:詐
斋:齋
债:債
盏:盞
斩:斬
辗:輾
崭:嶄
栈:堆
占:佔
绽:綻
张:張
涨:漲
帐:帳
账:賬
胀:脹
蛰:蟄
辙:轍
锗:鍺
贞:貞
针:針
侦:偵
诊:診
镇:鎮
阵:陣
挣:掙
睁:睜
狰:猙
争:爭
帧:幀
织:織
职:職
纸:紙
挚:摯
掷:擲
帜:幟
滞:滯
终:終
诌:謅
轴:軸
皱:皺
骤:驟
猪:豬
诸:諸
诛:誅
瞩:矚
嘱:囑
贮:貯
铸:鑄
注:註
驻:駐
砖:磚
转:轉
赚:賺
锥:錐
赘:贅
坠:墜
缀:綴
谆:諄
着:著
兹:茲
资:資
渍:漬
踪:蹤
综:綜
纵:縱
邹:鄒
诅:詛
组:組`;

function parseAndBuildDictionary(fileContent, callback) {
  // 假设文件内容每行是 "简体字:繁体字"
  var lines = fileContent.split('\n');

  lines.forEach(function (line) {
    var pair = line.split(':');
    if (pair.length == 2) {
      var simplified = pair[0].trim();
      var traditional = pair[1].trim();
      st_dict[simplified] = traditional;
      ts_dict[traditional] = simplified;
    } else {
      alert("读入错误：" + line);
    }
  });

  // 在解析完成后调用回调函数
  callback();
}

function deal(text, type) {
  if (type == 0 || type == 1) {
    var result = "";

    for (var i = 0; i < text.length; i++) {
      var char = text.charAt(i);

      if (type == 0) {
        // 简体字转繁体字
        var charTranslation = st_dict[char];
        result += charTranslation != undefined ? charTranslation : char;
      } else if (type == 1) {
        // 繁体字转简体字
        charTranslation = ts_dict[char];
        result += charTranslation != undefined ? charTranslation : char;
      }
    }

    return result;
  } else {
    // 未知的 type 类型，直接返回原始文本
    return text;
  }
}

// 获取页面中所有的文本节点并处理
function processTextNodes(element, type) {
  if (element.nodeType == 3) {
    // 文本节点
    if (element.nodeValue.trim() != "") {
      // console.log("处理前：" + element.nodeValue.trim());
      // console.log("处理后：" + deal(element.nodeValue.trim(), type));
      element.nodeValue = deal(element.nodeValue.trim(), type);
    }
  } else if (element.nodeType == 1) {
    // 元素节点，递归处理子节点
    for (var i = 0; i < element.childNodes.length; i++) {
      processTextNodes(element.childNodes[i], type);
    }
  }
}

// 繁体转简体
function t_to_s(element) {
  // console.log("繁体 -> 简体");
  processTextNodes(element, 1);
}

// 简体转繁体
function s_to_t(element) {
  // console.log("简体 -> 繁体");
  processTextNodes(element, 0);
}

// 元素加载完后立刻执行
document.addEventListener("DOMContentLoaded", function () {

  // 直接传递字符串给 parseAndBuildDictionary 函数
  parseAndBuildDictionary(txt_data, function () {
    // console.log(Object.keys(st_dict).length);
    // 解析完成后再执行转换函数
    s_to_t(document.body);

    // 获取三个 li 元素
    var traditionalLi = document.getElementById('traditional');
    var simplifiedLi = document.getElementById('simplified');

    // 点击事件处理函数
    function swapText() {
      // 交换文本值
      var temp = traditionalLi.textContent;
      traditionalLi.textContent = simplifiedLi.textContent;
      simplifiedLi.textContent = temp;
      // 相应内容转换
      if (traditionalLi.textContent == '繁') {
        // 转换为繁体字
        s_to_t(document.body);
      } else {
        // 转换为简体字
        t_to_s(document.body);
      }
    }

    // 为第一个和第三个 li 元素添加点击事件监听器
    traditionalLi.addEventListener('click', function () {
      swapText();
    });

    simplifiedLi.addEventListener('click', function () {
      swapText();
    });
  });
});


function refreshText() {
  var traditionalLi = document.getElementById('traditional');
  // 相应内容转换
  if (traditionalLi.textContent == '繁') {
    // 转换为繁体字
    s_to_t(document.body);
  } else {
    // 转换为简体字
    t_to_s(document.body);
  }
}

// 页面变化时调用
window.addEventListener("load", function () {
  refreshText();
});
window.addEventListener("resize", function () {
  refreshText();
});
